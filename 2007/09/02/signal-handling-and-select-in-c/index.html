<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Signal Handling and Select in C - Bryce Boe</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Signal Handling and Select in C"/>
            <meta property="og:url" content="https://bryceboe.com/2007/09/02/signal-handling-and-select-in-c/"/>
            <meta property="og:description" content="Two weeks ago I started a journey to read a textbook cover to cover so that I’ll be ready for the research I will be assisting with. Since I have yet to take a networking class I am a bit behind where I need to be, but that’s …"/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://bryceboe.com/theme/css/bootstrap.cerulean.min.css" type="text/css"/>
    <link href="https://bryceboe.com/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://bryceboe.com/theme/css/pygments/solarizedlight.css" rel="stylesheet">
        <link href="https://bryceboe.com/theme/css/typogrify.css" rel="stylesheet">
    <link rel="stylesheet" href="https://bryceboe.com/theme/css/style.css" type="text/css"/>

        <link href="https://bryceboe.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Bryce Boe ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://bryceboe.com/" class="navbar-brand">
Bryce Boe            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="https://bryceboe.com/archives/"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://bryceboe.com/2007/09/02/signal-handling-and-select-in-c/"
                       rel="bookmark"
                       title="Permalink to Signal Handling and Select in C">
                        Signal Handling and Select in&nbsp;C
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2007-09-02T18:26:00-07:00"> Sun 02 September 2007</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="https://bryceboe.com/tag/c/">C</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Two weeks ago I started a journey to read a textbook cover to cover so that
I&#8217;ll be ready for the research I will be assisting with. Since I have yet to
take a networking class I am a bit behind where I need to be, but that&#8217;s not a
problem as I learn rather quickly and Networking is my area of interest. The
book I&#8217;m reading is <a href="http://www.amazon.com/Computer-Networking-Top-Down-Approach-Featuring/dp/0321227352/ref=sr_11_1/102-4260619-0027306?ie=UTF8&amp;qid=1188781467&amp;sr=11-1">Computer Networking: A Top-Down Approach Featuring the
Internet</a> by <a href="http://www-net.cs.umass.edu/personnel/kurose.html">James F. Kuross</a> and <a href="http://cis.poly.edu/~ross/">Keith W. Ross</a>. I just completed the
section on <span class="caps">IP</span>&#8217;s application layer and am familiarizing myself with socket
programming in C; which I must say is far more complicated than in python. But
that&#8217;s why I like C; I get a better understanding of what is going on, and I
have more control over the sockets&nbsp;themselves.</p>
<p>My freshmen year of college <a href="http://www.adamdoupe.com">Adam</a> and I wrote an <span class="caps">IRC</span> based protocol and
coded a server and client in Java which we called gauchoShare. I have also
written some client server programs in python but I have never done anything in
C which is what I will most likely be working with since we are manipulating
the transport layer. To give me a brief overview of C <span class="caps">TCP</span>/<span class="caps">IP</span> sockets I read
<a href="http://www.amazon.com/Pocket-Sockets-Version-Kaufmann-Practical/dp/1558606866/ref=sr_11_1/102-4260619-0027306?ie=UTF8&amp;qid=1188781976&amp;sr=11-1">The Pocket Guide to <span class="caps">TCP</span>/<span class="caps">IP</span> Sockets</a>. In addition to learning how to use
sockets in C I also discovered how Multiplexing input and output (I/O) works,
and finally how to use signals. As I do with most things when I learn them I
create a very simple program to demonstrate and that is what the following is.
The program when compiled will echo everything typed after <em>enter</em> has been
pressed. When closing the program via ctrl+c it will print the message&nbsp;&#8220;Exit!&#8221;.</p>
<div class="highlight"><pre><span></span>#include &amp;lt;stdio.h&amp;gt;  // printf
#include &amp;lt;fcntl.h&amp;gt;  // FD_ functions
#include &amp;lt;signal.h&amp;gt; // sig functions
#include &amp;lt;stdlib.h&amp;gt; // exit
#include &amp;lt;unistd.h&amp;gt; // STDIN_FILENO

void exit_error(char* msg) {
  perror(msg);
  exit(1);
}

void KBInterrupt(int sig) {
  printf(&quot;Exit!\n&quot;);
  exit(1);
}

int main() {
  // Variables
  fd_set fd;
  int charsRead;
  char buff[256];
  struct sigaction handler;

  // Setup Action Handler
  handler.sa_handler = KBInterrupt; // Function to call
  if (sigfillset(&amp;amp;handler.sa_mask) &amp;lt; 0)
    exit_error(&quot;sigfillset failed&quot;);
  handler.sa_flags=0;
  if (sigaction(SIGINT,&amp;amp;handler,0) &amp;lt; 0) // Setup signal
    exit_error(&quot;sigaction failed&quot;);

  // Setup file descriptors
  FD_ZERO(&amp;amp;fd);
  FD_SET(STDIN_FILENO,&amp;amp;fd);

  // The main part of the program
  for (;;) {
    select(STDIN_FILENO+1,&amp;amp;fd,NULL,NULL,NULL);
    if(FD_ISSET(STDIN_FILENO,&amp;amp;fd)) { // Checks if enter has been pressed
      charsRead = read(STDIN_FILENO,buff,255);
      write(STDOUT_FILENO,buff,charsRead);
    }
  }
  return 0;
}
</pre></div>


<p>When Adam and I wrote gauchoShare in Java we were not aware of I/O multiplexing
and thus we created a new thread to handle keyboard input from the user. This
obviously has increased overhead, and multiplexing easily solves that problem.
In addition to multiplexing the program demonstrates how to handle the
interrupt signal sent by ctrl+c in&nbsp;linux.</p>
            </div>
            <!-- /.entry-content -->
<section class="well" id="related-posts">
    <h4>Related Posts:</h4>
    <ul>
        <li><a href="https://bryceboe.com/2012/02/23/implementation-of-a-process-based-job-management-system-in-c/">Implementation of a Process-Based Job Management System in&nbsp;C</a></li>
        <li><a href="https://bryceboe.com/2012/02/20/process-based-job-management-in-c-and-python/">Process-Based Job Management in C and&nbsp;Python</a></li>
        <li><a href="https://bryceboe.com/2010/09/14/properly-handling-the-keyboard-interrupt-exception-sigint-within-a-python-c-module/">Properly Handling the Keyboard Interrupt Exception (<span class="caps">SIGINT</span>) within a Python C&nbsp;Module</a></li>
        <li><a href="https://bryceboe.com/2007/09/22/telnet-like-client/">Telnet-like&nbsp;client</a></li>
    </ul>
</section>
    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'bboe'; // required: replace example with your forum shortname
            var disqus_url = 'https://bryceboe.com/2007/09/02/signal-handling-and-select-in-c/';
            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item">
                      <a href="https://github.com/bboe"><i class="fa fa-github fa-lg"></i></a>
                      <a href="https://github.com/bboe">github</a>
                    </li>
                    <li class="list-group-item">
                      <a href="http://stackoverflow.com/users/176978/bboe"><i class="fa fa-stack-overflow fa-lg"></i></a>
                      <a href="http://stackoverflow.com/users/176978/bboe">stack-overflow</a>
                    </li>
                    <li class="list-group-item">
                      <a href="http://www.linkedin.com/in/bbzbryce"><i class="fa fa-linkedin fa-lg"></i></a>
                      <a href="http://www.linkedin.com/in/bbzbryce">linkedin</a>
                    </li>
                    <li class="list-group-item">
                      <a href="https://plus.google.com/+BryceBoe?rel=author"><i class="fa fa-google-plus fa-lg"></i></a>
                      <a href="https://plus.google.com/+BryceBoe?rel=author">google+</a>
                    </li>
                    <li class="list-group-item">
                      <a href="https://twitter.com/bboe"><i class="fa fa-twitter fa-lg"></i></a>
                      <a href="https://twitter.com/bboe">twitter</a>
                    </li>
                  </ul>
                </li>

                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
                    <ul class="list-group" id="recentposts">
                        <li class="list-group-item">
                            <a href="https://bryceboe.com/2014/03/27/daniel-boe-march-27-1988-february-28-2014/">
                                Daniel Boe: March 27, 1988 - February 28,&nbsp;2014
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="https://bryceboe.com/2014/01/25/hello-pelican-world/">
                                Hello Pelican&nbsp;World
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="https://bryceboe.com/2013/05/29/ph-d-proposal-announcement/">
                                Ph.D. Proposal&nbsp;Announcement
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="https://bryceboe.com/2013/05/12/mothers-day/">
                                Mother&#8217;s&nbsp;Day
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="https://bryceboe.com/2012/11/05/time-zones-in-python-and-datetime-representations/">
                                Time Zones in Python and Date/Time&nbsp;Representations
                            </a>
                        </li>
                    </ul>
                </li>


                <li class="list-group-item"><a href="https://bryceboe.com/tags/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group" id="tags">
                    </ul>
                </li>    
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://adamdoupe.com/" target="_blank">
                Adam Doupé
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://juliebifano.com/" target="_blank">
                Julie Bifano
            </a>
        </li>
      </ul>
    </li>

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Bryce Boe
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="//code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://bryceboe.com/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://bryceboe.com/theme/js/respond.min.js"></script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'bboe'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-510348-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();

    </script>
</body>
</html>